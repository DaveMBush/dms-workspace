generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model accounts {
  id        String    @id @default(uuid())
  name      String    @unique
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  deletedAt DateTime?
  version   Int       @default(1)
  trades    trades[]
  divDeposits divDeposits[]
}

model universe {
  id                     String     @id @default(uuid())
  distribution           Float
  distributions_per_year Int
  last_price             Float
  most_recent_sell_date  DateTime?
  most_recent_sell_price Float?
  symbol                 String
  ex_date                DateTime?
  risk                   Int
  risk_group_id          String
  risk_group             risk_group @relation(fields: [risk_group_id], references: [id])
  expired                Boolean    @default(false)
  createdAt              DateTime   @default(now())
  updatedAt              DateTime   @updatedAt
  deletedAt              DateTime?
  version                Int        @default(1)
  trades                 trades[]

  divDeposits divDeposits[]
}

model risk_group {
  id        String     @id @default(uuid())
  name      String
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt
  deletedAt DateTime?
  version   Int        @default(1)
  universe  universe[]
}

model trades {
  id         String    @id @default(uuid())
  universeId String
  universe   universe  @relation(fields: [universeId], references: [id])
  accountId  String
  account    accounts  @relation(fields: [accountId], references: [id])
  buy        Float
  sell       Float
  buy_date   DateTime
  quantity   Int
  sell_date  DateTime?
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
  deletedAt  DateTime?
}

model holidays {
  id        String    @id @default(uuid())
  date      DateTime  @unique
  name      String
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  deletedAt DateTime?
  version   Int       @default(1)
}

model divDepositType {
  id        String    @id @default(uuid())
  name      String
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  deletedAt DateTime?
  divDeposits divDeposits[]
}

model divDeposits {
  id        String    @id @default(uuid())
  date      DateTime
  amount    Float
  accountId String
  account   accounts  @relation(fields: [accountId], references: [id])
  divDepositTypeId String
  divDepositType divDepositType @relation(fields: [divDepositTypeId], references: [id])
  universeId String?
  universe   universe?  @relation(fields: [universeId], references: [id])
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  deletedAt DateTime?
  version   Int       @default(1)
}

model screener {
  id        String    @id @default(uuid())
  symbol    String    @unique
  has_volitility Boolean
  objectives_understood Boolean
  graph_higher_before_2008 Boolean
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  deletedAt DateTime?
  version   Int       @default(1)
}
