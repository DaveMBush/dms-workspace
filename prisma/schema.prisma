generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model accounts {
  id        String    @id @default(uuid())
  name      String    @unique
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  deletedAt DateTime?
  version   Int       @default(1)
  trades    trades[]
  statuses  status[]
}

model status {
  id        String     @id @default(uuid())
  accountId String
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt
  deletedAt DateTime?
  version   Int        @default(1)
  trades    trades[]
  accounts  accounts[]
}

model universe {
  id                     String     @id @default(uuid())
  distribution           Float
  distributions_per_year Int
  last_price             Float
  most_recent_sell_date  DateTime?
  symbol                 String
  ex_date                DateTime
  risk                   Int
  risk_group_id          String
  risk_group             risk_group @relation(fields: [risk_group_id], references: [id])
  expired                Boolean    @default(false)
  createdAt              DateTime   @default(now())
  updatedAt              DateTime   @updatedAt
  deletedAt              DateTime?
  version                Int        @default(1)
  trades                 trades[]
}

model risk_group {
  id        String     @id @default(uuid())
  name      String
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt
  deletedAt DateTime?
  version   Int        @default(1)
  universe  universe[]
}

model trades {
  id         String    @id @default(uuid())
  universeId String
  universe   universe  @relation(fields: [universeId], references: [id])
  statusId   String
  status     status    @relation(fields: [statusId], references: [id])
  accountId  String
  account    accounts  @relation(fields: [accountId], references: [id])
  buy        Float
  sell       Float
  buy_date   DateTime
  sell_date  DateTime?
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
  deletedAt  DateTime?
}

model holidays {
  id        String    @id @default(uuid())
  date      DateTime
  name      String
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  deletedAt DateTime?
  version   Int       @default(1)
}
