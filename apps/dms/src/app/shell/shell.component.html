<p-toolbar class="text-xl font-semibold toolbar flex-none">
  <ng-template #start> Dividend Management System </ng-template>
  <ng-template #end>
    <!-- User Info and Actions -->
    @if (isAuthenticated$()) {
    <div class="flex items-center gap-3">
      <!-- User Display Name -->
      <span
        class="text-color-secondary text-sm font-medium"
        data-testid="user-menu"
      >
        Welcome, {{ getUserDisplayName$() }}
      </span>

      <!-- Profile Button -->
      <p-button
        icon="pi pi-user"
        class="mr-2"
        text
        severity="secondary"
        routerLink="/profile"
        pTooltip="User Profile"
        tooltipPosition="bottom"
      />

      <!-- Logout Button -->
      <p-button
        icon="pi pi-sign-out"
        class="mr-2"
        text
        severity="secondary"
        (onClick)="logout()"
        pTooltip="Sign Out"
        tooltipPosition="bottom"
        data-testid="logout-button"
      />
    </div>
    }

    <!-- Theme Toggle Button -->
    <p-button
      ngSkipHydration
      icon="pi {{ isBrowser ? themeIcon : '' }}"
      class="mr-2"
      text
      severity="secondary"
      (onClick)="toggleTheme()"
      [pTooltip]="themeTooltip"
      tooltipPosition="bottom"
    />
  </ng-template>
</p-toolbar>
<p-splitter
  class="flex-1 overflow-auto min-h-0"
  [style]="{ height: '100%' }"
  stateStorage="local"
  stateKey="dms-splitter-state"
  [panelSizes]="[20, 80]"
>
  <ng-template #panel>
    <div class="h-full w-full">
      <dms-global
        [selectedId]="selectedId"
        (selectedIdChange)="onSelectionChange($event)"
      />
      <!-- TODO: Pass selection to accounts component if not using router-outlet -->
      <router-outlet name="accounts"></router-outlet>
    </div>
  </ng-template>
  <ng-template #panel>
    <div class="h-full w-full">
      <router-outlet></router-outlet>
    </div>
  </ng-template>
</p-splitter>

<!-- Confirmation Dialog -->
<p-confirmDialog data-testid="confirm-dialog"></p-confirmDialog>
