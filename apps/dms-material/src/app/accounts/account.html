<div class="accounts-container" data-testid="accounts-panel">
  <mat-toolbar class="global-toolbar">
    <span>Global</span>
  </mat-toolbar>

  <mat-nav-list class="global-list">
    <a
      mat-list-item
      routerLink="/global/universe"
      routerLinkActive="active-link"
    >
      <mat-icon matListItemIcon>public</mat-icon>
      <span matListItemTitle>Universe</span>
    </a>
    <a
      mat-list-item
      routerLink="/global/screener"
      routerLinkActive="active-link"
    >
      <mat-icon matListItemIcon>filter_list</mat-icon>
      <span matListItemTitle>Screener</span>
    </a>
    <a
      mat-list-item
      routerLink="/global/summary"
      routerLinkActive="active-link"
    >
      <mat-icon matListItemIcon>dashboard</mat-icon>
      <span matListItemTitle>Summary</span>
    </a>
    <a
      mat-list-item
      routerLink="/global/error-logs"
      routerLinkActive="active-link"
    >
      <mat-icon matListItemIcon>error</mat-icon>
      <span matListItemTitle>Error Logs</span>
    </a>
  </mat-nav-list>

  <mat-divider></mat-divider>

  <mat-toolbar class="accounts-toolbar">
    <span>Accounts</span>
    <span class="spacer"></span>
    <button
      mat-icon-button
      (click)="addAccount()"
      aria-label="Add account"
      class="add-button"
      data-testid="add-account-button"
    >
      <mat-icon>add</mat-icon>
    </button>
  </mat-toolbar>

  <mat-nav-list class="accounts-list">
    @for (account of accountsArray$(); track account.id) { @if(addingNode ===
    account.id || editingNode === account.id) {
    <mat-list-item
      class="account-item account-item-with-actions editing-item"
      data-testid="account-item"
    >
      <mat-icon matListItemIcon>account_balance</mat-icon>
      <dms-node-editor
        matListItemLine
        placeholder="Edit Account"
        [(ngModel)]="editingContent"
        (cancel)="cancelEdit(account)"
        (save)="saveEdit(account)"
      />
    </mat-list-item>
    } @else {
    <a
      mat-list-item
      [routerLink]="['/account', account.id]"
      routerLinkActive="active-account"
      class="account-item account-item-with-actions"
      data-testid="account-item"
    >
      <mat-icon matListItemIcon>account_balance</mat-icon>
      <div class="account-content">
        <span class="account-name" data-testid="account-name"
          >{{ account.name }}</span
        >
        <div class="action-buttons">
          <button
            mat-icon-button
            class="edit-button"
            (click)="editAccount($event,account)"
            aria-label="Edit account"
            data-testid="edit-account-button"
          >
            <mat-icon>edit</mat-icon>
          </button>
          <button
            mat-icon-button
            class="delete-button"
            (click)="deleteAccount($event,account);"
            aria-label="Delete account"
            data-testid="delete-account-button"
          >
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </div>
    </a>
    } } @empty {
    <mat-list-item class="empty-message">
      <mat-icon matListItemIcon>info</mat-icon>
      <span matListItemTitle>No accounts found</span>
    </mat-list-item>
    }
  </mat-nav-list>
</div>
