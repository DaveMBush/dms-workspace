<h2 mat-dialog-title>{{ title }}</h2>

<mat-dialog-content>
  <form [formGroup]="form" class="flex flex-col gap-4 p-4">
    <div class="flex flex-row gap-4">
      <mat-form-field appearance="outline" class="flex-1">
        <mat-label>Symbol</mat-label>
        <input matInput formControlName="symbol" [readonly]="isEditMode" />
        @if (symbolHasError$()) {
        <mat-error>Symbol is required</mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline" class="flex-1">
        <mat-label>Date</mat-label>
        <input matInput [matDatepicker]="datePicker" formControlName="date" />
        <mat-datepicker-toggle
          matSuffix
          [for]="datePicker"
        ></mat-datepicker-toggle>
        <mat-datepicker #datePicker></mat-datepicker>
        @if (dateHasError$()) {
        <mat-error>Date is required</mat-error>
        }
      </mat-form-field>
    </div>

    <div class="flex flex-row gap-4">
      <mat-form-field appearance="outline" class="flex-1">
        <mat-label>Amount</mat-label>
        <input matInput type="number" formControlName="amount" step="0.01" />
        <span matPrefix>$&nbsp;</span>
        @if (amountHasError$()) {
        <mat-error>Amount is required</mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline" class="flex-1">
        <mat-label>Type</mat-label>
        <mat-select formControlName="type">
          @for (type of depositTypes; track type) {
          <mat-option [value]="type">{{ type }}</mat-option>
          }
        </mat-select>
      </mat-form-field>
    </div>
  </form>
</mat-dialog-content>

<mat-dialog-actions align="end" class="gap-2">
  <button mat-button (click)="onCancel()">Cancel</button>
  <button
    mat-raised-button
    color="primary"
    (click)="onSubmit()"
    [disabled]="isLoading$()"
    class="bg-green-600 hover:bg-green-700"
  >
    @if (isLoading$()) {
    <mat-spinner diameter="20"></mat-spinner>
    } @else {
    <ng-container>
      <mat-icon>check</mat-icon>
      <span class="ml-1">{{ buttonLabel$() }}</span>
    </ng-container>
    }
  </button>
</mat-dialog-actions>
