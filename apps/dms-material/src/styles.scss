@use '@angular/material' as mat;
@use './themes/theme-variables';
@use './themes/light-theme' as light;
@use './themes/dark-theme' as dark;

// Include Material core styles (required once)
@include mat.core();

// CSS Layer ordering for proper specificity
@layer tailwind-base, material, tailwind-utilities;

@layer tailwind-base {
  @tailwind base;
}

@layer tailwind-utilities {
  @tailwind components;
  @tailwind utilities;
}

.mdc-notched-outline__notch {
  border-right: none;
}

// Apply light theme by default
@layer material {
  html {
    @include mat.all-component-themes(light.$light-theme);

    // Button color variants for light theme
    .btn-primary {
      @include mat.button-overrides(
        (
          filled-container-color: #2563eb,
          filled-label-text-color: #ffffff,
        )
      );
    }

    .btn-tertiary {
      @include mat.button-overrides(
        (
          filled-container-color: #f59e0b,
          filled-label-text-color: #000000,
        )
      );
    }

    .btn-error {
      @include mat.button-overrides(
        (
          filled-container-color: #ef4444,
          filled-label-text-color: #ffffff,
        )
      );
    }
  }

  // Apply dark theme when .dark-theme class is present
  .dark-theme {
    @include mat.all-component-themes(dark.$dark-theme);

    // Button color variants for dark theme
    .btn-primary {
      @include mat.button-overrides(
        (
          filled-container-color: #3b82f6,
          filled-label-text-color: #ffffff,
        )
      );
    }

    .btn-tertiary {
      @include mat.button-overrides(
        (
          filled-container-color: #fbbf24,
          filled-label-text-color: #000000,
        )
      );
    }

    .btn-error {
      @include mat.button-overrides(
        (
          filled-container-color: #ef4444,
          filled-label-text-color: #ffffff,
        )
      );
    }
  }
}

// Global styles
html,
body {
  margin: 0;
  font-family: Roboto, sans-serif;
  height: 100%;
  background-color: var(--dms-background);
  color: var(--dms-text-primary);
}

// Smooth theme transitions
* {
  transition: background-color 0.2s ease, color 0.2s ease,
    border-color 0.2s ease;
}

// Custom utility classes for theming
.surface-ground {
  background-color: var(--dms-background);
}

.surface-card {
  background-color: var(--dms-surface);
}

.text-primary {
  color: var(--dms-text-primary);
}

.text-secondary {
  color: var(--dms-text-secondary);
}

.border-default {
  border-color: var(--dms-border);
}

// Snackbar (toast notification) styles
.snackbar-success {
  background-color: #22c55e !important;
  color: white !important;

  button {
    color: white !important;
  }
}

.snackbar-info {
  background-color: #3b82f6 !important;
  color: white !important;

  button {
    color: white !important;
  }
}

.snackbar-warn {
  background-color: #f59e0b !important;
  color: #000000 !important;

  button {
    color: #000000 !important;
  }
}

.snackbar-error {
  background-color: #ef4444 !important;
  color: white !important;

  button {
    color: white !important;
  }
}

// Dim placeholder text using Material form field variables
mat-form-field {
  --mat-form-field-outlined-input-text-placeholder-color: rgba(0, 0, 0, 0.38);
}

.dark-theme mat-form-field {
  --mat-form-field-outlined-input-text-placeholder-color: rgba(
    255,
    255,
    255,
    0.38
  );
}

// Dialog contrast and styling
.mat-mdc-dialog-surface {
  background-color: #ffffff !important;
  box-shadow: 0px 11px 15px -7px rgba(0, 0, 0, 0.2),
    0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12) !important;
}

.mat-mdc-dialog-container {
  --mdc-dialog-container-color: #ffffff;
}

.dark-theme .mat-mdc-dialog-surface {
  background-color: #424242 !important;
}

.dark-theme .mat-mdc-dialog-container {
  --mdc-dialog-container-color: #424242;
}
